@model QuestionPapers.Models.FileNode

@if (Model.IsDirectory)
{
    <div class="card mb-2">
        <div class="card-header bg-light">
            <h5 class="mb-0">
                <button class="btn btn-link text-decoration-none text-dark fw-bold folder-icon"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#collapse-@Model.GoogleDriveId">
                    📁 @Model.Name
                </button>
            </h5>
        </div>
        <div id="collapse-@Model.GoogleDriveId" class="collapse show">
            <div class="card-body ps-4">
                @if (Model.Children.Count == 0)
                {
                    <span class="text-muted">Empty folder</span>
                }
                @foreach (var child in Model.Children.OrderBy(c => !c.IsDirectory).ThenBy(c => c.Name))
                {
                    @await Html.PartialAsync("_FileNode", child)
                }
            </div>
        </div>
    </div>
}
else
{
    <div class="list-group-item border-0 ps-4 py-2">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <i class="bi bi-file-pdf text-danger"></i>
                <span>@Model.Name</span>
            </div>
            <div>
                <a href="@Model.WebViewLink" target="_blank" class="btn btn-sm btn-outline-primary">
                    View
                </a>
            </div>
        </div>
    </div>
}